package $package;
import ballerina.net.http;

@http:BasePath("$apiContext")
service $serviceName {

#foreach($uri in $apiResources)

    @http:$uri.httpVerb
    #if(!$StringUtils.isEmpty($uri.consumes))@Consumes ($uri.consumes)#end
    #if(!$StringUtils.isEmpty($uri.produces))@Produces ($uri.produces)#end
	@http:Path("$uri.uriTemplate")
    resource $uri.templateId (message m) {
        #if($uri.productionEndpoint)http:ClientConnector productionEndpoint = create http:ClientConnector(getUrlFromKey("$uri.productionEndpoint"));#end

        #if($uri.sandboxEndpoint)http:ClientConnector sandboxEndpoint = create http:ClientConnector(getUrlFromKey("$uri.sandboxEndpoint"));#end

        message response;
        string endpointType;
        string productionType;


        endpointType = "production";
        productionType = "production";

        if (endpointType == productionType) {
            response = http:ClientConnector.execute(productionEndpoint, "$uri.httpVerb.toLowerCase()", "", m);
        } else {
            response = http:ClientConnector.execute(sandboxEndpoint, "$uri.httpVerb.toLowerCase()", "", m);
        }

        reply response;
    }

#end
}